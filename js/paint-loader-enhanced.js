class PaintBucketLoaderEnhanced{constructor(){this.loaderDuration=2e3;this.primaryColor='#00E0FF';this.secondaryColor='#FFB000';this.backgroundColor='#0B0D10';this.textColor='#EAEAEA';this.splashes=[];document.body.classList.add('loader-active');document.body.style.overflow='hidden';this.createLoader();this.animate()}createLoader(){const e=document.getElementById('paint-bucket-loader');e&&e.remove();this.loaderContainer=document.createElement('div');this.loaderContainer.id='paint-bucket-loader';this.loaderContainer.style.cssText=`position:fixed;top:0;left:0;width:100%;height:100%;background:${this.backgroundColor};z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow:hidden;`;this.createSplashBackground();this.createPaintBucket();this.createLoadingText();document.body.appendChild(this.loaderContainer)}createSplashBackground(){this.splashContainer=document.createElement('div');this.splashContainer.style.cssText='position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;';this.createInitialSplashes();this.loaderContainer.appendChild(this.splashContainer)}createInitialSplashes(){for(let e=0;e<6;e++)this.createPaintSplash(100*Math.random(),100*Math.random(),.6*Math.random()+.3,.2*Math.random()+.1,Math.random()>.5?this.primaryColor:this.secondaryColor)}createPaintBucket(){this.bucketContainer=document.createElement('div');this.bucketContainer.style.cssText='position:relative;width:160px;height:160px;margin-bottom:30px;z-index:2;';this.bucketBody=document.createElement('div');this.bucketBody.style.cssText='position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:100px;height:80px;background:#2A2D35;border-radius:4px 4px 10px 10px;overflow:hidden;box-shadow:0 10px 25px rgba(0,0,0,0.3);';this.bucketFill=document.createElement('div');this.bucketFill.style.cssText=`position:absolute;bottom:0;left:0;width:100%;height:0%;background:linear-gradient(0deg,${this.primaryColor} 0%,${this.secondaryColor} 100%);border-radius:4px 4px 10px 10px;transition:height .1s linear;`;this.bucketRim=document.createElement('div');this.bucketRim.style.cssText='position:absolute;top:-12px;left:50%;transform:translateX(-50%);width:120px;height:18px;background:#3A3D45;border-radius:18px 18px 4px 4px;box-shadow:0 5px 15px rgba(0,0,0,0.2);';this.bucketHandle=document.createElement('div');this.bucketHandle.style.cssText='position:absolute;top:-35px;left:50%;transform:translateX(-50%);width:40px;height:20px;border:8px solid #3A3D45;border-bottom:none;border-radius:40px 40px 0 0;';this.bucketBody.appendChild(this.bucketFill);this.bucketContainer.appendChild(this.bucketBody);this.bucketContainer.appendChild(this.bucketRim);this.bucketContainer.appendChild(this.bucketHandle);this.loaderContainer.appendChild(this.bucketContainer)}createLoadingText(){this.percentageText=document.createElement('div');this.percentageText.style.cssText=`color:${this.primaryColor};font-size:1.8rem;font-weight:700;text-align:center;margin-top:10px;font-family:'Segoe UI',monospace;z-index:2;text-shadow:0 2px 8px rgba(0,224,255,0.3);`;this.percentageText.textContent='0%';this.loaderContainer.appendChild(this.percentageText);this.dripContainer=document.createElement('div');this.dripContainer.style.cssText='position:absolute;bottom:0;left:0;width:100%;height:120px;overflow:visible;pointer-events:none;z-index:3;';this.loaderContainer.appendChild(this.dripContainer)}createPaintSplash(e,t,s,i,r){const o=document.createElement('div'),a=30+50*Math.random();o.style.cssText=`position:absolute;top:${t}%;left:${e}%;width:${a}px;height:${a}px;background:radial-gradient(circle,${r} 0%,transparent 70%);border-radius:50%;opacity:${i};transform:translate(-50%,-50%) scale(${s});filter:blur(${1+4*Math.random()}px);pointer-events:none;`;this.splashContainer.appendChild(o);this.splashes.push(o);return o}animate(){typeof gsap!=='undefined'?this.animateWithGSAP():this.animateWithCSS()}animateWithGSAP(){const e=gsap.timeline({onComplete:()=>this.removeLoader()});e.fromTo(this.splashContainer.children,{scale:0,opacity:0},{scale:1,opacity:.3,duration:.5,stagger:.08,ease:"back.out(1.7)"});e.fromTo(this.bucketContainer,{scale:0,rotation:-15,opacity:0},{scale:1,rotation:0,opacity:1,duration:.6,ease:"back.out(1.7)"},"-=.3");e.fromTo(this.percentageText,{scale:0,opacity:0},{scale:1,opacity:1,duration:.4,ease:"back.out(1.7)"},"-=.4");let t=0;e.to(this.bucketFill,{height:'100%',duration:1.5,ease:"power2.out",onUpdate:()=>{t=Math.round(100*this.bucketFill.offsetHeight/this.bucketBody.offsetHeight);this.percentageText.textContent=t+'%';[25,50,75,90].includes(t)&&this.createPaintDrip();t%20===0&&t<100&&this.createRandomSplash()}},"-=.2");e.call(()=>{this.createFinalSplashes()},null,"-=.1")}createPaintDrip(){const e=document.createElement('div'),t=50+60*Math.random()-30,s=10+20*Math.random(),i=Math.random()>.5?this.primaryColor:this.secondaryColor;e.style.cssText=`position:absolute;bottom:80px;left:${t}%;width:${4+6*Math.random()}px;height:${s}px;background:linear-gradient(to bottom,${i} 0%,${i}80 80%,transparent 100%);border-radius:0 0 8px 8px;transform-origin:top center;z-index:4;`;this.dripContainer.appendChild(e);typeof gsap!=='undefined'&&gsap.to(e,{scaleY:1,opacity:1,duration:.2,ease:"power2.out",onComplete:()=>{gsap.to(e,{y:100,opacity:0,duration:.5,ease:"power2.in",onComplete:()=>{e.parentNode&&e.remove()}})}})}createRandomSplash(){const e=10+80*Math.random(),t=10+80*Math.random(),s=Math.random()>.5?this.primaryColor:this.secondaryColor;this.createPaintSplash(e,t,.2+.5*Math.random(),.05+.15*Math.random(),s)}createFinalSplashes(){for(let e=0;e<4;e++)setTimeout(()=>{const t=100*Math.random(),s=100*Math.random(),i=Math.random()>.5?this.primaryColor:this.secondaryColor;this.createPaintSplash(t,s,.3+.6*Math.random(),.3,i)},100*e)}animateWithCSS(){let e=0,t=15,s=100/(this.loaderDuration/t),i=setInterval(()=>{e+=s;if(e>=100){e=100;clearInterval(i);this.createFinalSplashes();setTimeout(()=>this.removeLoader(),500)}this.bucketFill.style.height=e+'%';this.percentageText.textContent=Math.round(e)+'%';[25,50,75,90].includes(Math.round(e))&&this.createPaintDrip();Math.round(e)%20===0&&this.createRandomSplash()},t)}removeLoader(){typeof gsap!=='undefined'?gsap.to(this.loaderContainer,{opacity:0,duration:.3,ease:"power2.in",onComplete:()=>this.cleanup()}):(this.loaderContainer.style.opacity='0',setTimeout(()=>this.cleanup(),300))}cleanup(){this.loaderContainer&&this.loaderContainer.parentNode&&this.loaderContainer.remove();document.body.style.overflow='';document.body.classList.remove('loader-active');document.body.classList.add('loader-complete');window.dispatchEvent(new CustomEvent('paintLoaderComplete'))}}function isPageRefresh(){return performance.navigation.type===1||performance.getEntriesByType("navigation")[0]?.type==="reload"}function isBackForwardNavigation(){return performance.navigation.type===2||(window.performance&&window.performance.getEntriesByType("navigation")[0]?.type==="back_forward")}function initializePaintLoader(){const e=document.getElementById('paint-bucket-loader');e&&e.remove();window.paintBucketLoader=new PaintBucketLoaderEnhanced}document.readyState==='loading'?document.addEventListener('DOMContentLoaded',initializePaintLoader):initializePaintLoader();window.addEventListener('pageshow',function(e){e.persisted&&initializePaintLoader()});document.addEventListener('click',function(e){const t=e.target.closest('a');if(t&&t.href&&!t.href.includes('#')&&!t.href.includes('javascript:')&&t.target!=='_blank'&&t.getAttribute('download')===null){setTimeout(()=>{document.visibilityState==='visible'&&initializePaintLoader()},50)}});